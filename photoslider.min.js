function _classCallCheck(c,f){if(!(c instanceof f))throw new TypeError("Cannot call a class as a function")}(function(){$("head").html($("head").html()+"<link href='http://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css' rel='stylesheet'>");var c={};this.photoslider=c,$(window).scroll(function(o){1==c.ifPhotosliderWork&&($(window).scrollLeft(0),$(window).scrollTop(0))}),c.ifmove=0,$(window).mousemove(function(o){c.ifmove=1,1==c.mousedown_Lock&&1==c.ifPhotosliderWork&&"PhotoSlider_NameSpace_Img_Mask_Node"==o.target.id&&(c.mouseX_c=o.pageX,c.mouseY_c=o.pageY,c.grabImg())}),$(window).dblclick(function(o){if(1==c.ifPhotosliderWork&&"PhotoSlider_NameSpace_Img_Mask_Node"==o.target.id){var p=imgSrcPool[c.Index].width,q=imgSrcPool[c.Index].height;c.PhotoSizeRecover(p,q,1)}}),$(window).mousedown(function(o){if(c.ifmove=0,1==c.ifPhotosliderWork){var p=o.pageX,q=o.pageY;c.mouseX=p,c.mouseY=q,c.RelativeX=p-$("#PhotoSlider_NameSpace_MainImg_Node").offset().left,c.RelativeY=q-$("#PhotoSlider_NameSpace_MainImg_Node").offset().top,c.mousedown_Lock=1,$("#PhotoSlider_NameSpace_MainImg_Node").css("transition","all 0s")}}),$(window).mouseup(function(){if(1==c.ifPhotosliderWork){$("#PhotoSlider_NameSpace_MainImg_Node").css("transition","all 0.2s"),c.mousedown_Lock=0;var o=$("#PhotoSlider_NameSpace_MainImg_Node").offset().left,p=$("#PhotoSlider_NameSpace_MainImg_Node").offset().top;if(0==c.testRotateifHorizontal())var q=$("#PhotoSlider_NameSpace_MainImg_Node").width(),r=$("#PhotoSlider_NameSpace_MainImg_Node").height();else if(1==c.testRotateifHorizontal())var q=$("#PhotoSlider_NameSpace_MainImg_Node").height(),r=$("#PhotoSlider_NameSpace_MainImg_Node").width();var s=$(window).width(),t=$(window).height();if(1==c.prenextPool[0]||1==c.prenextPool[1]){//pre next 画框转变为主画框
if(1==c.prenextPool[0]){var u=$("#PhotoSlider_NameSpace_preImg_Node").offset().left,v=$("#PhotoSlider_NameSpace_preImg_Node").offset().top;$("#PhotoSlider_NameSpace_MainImg_Node").css("transition","0s"),$("#PhotoSlider_NameSpace_MainImg_Node").css("left",u),$("#PhotoSlider_NameSpace_MainImg_Node").css("top",v),$("#PhotoSlider_NameSpace_MainImg_Node").width($("#PhotoSlider_NameSpace_preImg_Node").width()),$("#PhotoSlider_NameSpace_MainImg_Node").height($("#PhotoSlider_NameSpace_preImg_Node").height());var w=imgSrcPool.length;0==c.Index?c.Index=w-1:c.Index--,c.predoswipe(0),$("#PhotoSlider_NameSpace_ToolBarContent_category_Select_Node").hide(),c.refreshSideImg(),c.prenextPool[0]=0}else if(1==c.prenextPool[1]){var u=$("#PhotoSlider_NameSpace_nextImg_Node").offset().left,v=$("#PhotoSlider_NameSpace_nextImg_Node").offset().top;$("#PhotoSlider_NameSpace_MainImg_Node").css("transition","0s"),$("#PhotoSlider_NameSpace_MainImg_Node").css("top",v),$("#PhotoSlider_NameSpace_MainImg_Node").css("left",u),$("#PhotoSlider_NameSpace_MainImg_Node").width($("#PhotoSlider_NameSpace_nextImg_Node").width()),$("#PhotoSlider_NameSpace_MainImg_Node").height($("#PhotoSlider_NameSpace_nextImg_Node").height());var w=imgSrcPool.length;c.Index==w-1?c.Index=0:c.Index++,c.predoswipe(1),$("#PhotoSlider_NameSpace_ToolBarContent_category_Select_Node").hide(),c.refreshSideImg(),c.prenextPool[1]=0}}else if(1==c.ifmove){if(0==c.testRotateifHorizontal())q>s&&r>t?(0<o&&q>s&&r>t?$("#PhotoSlider_NameSpace_MainImg_Node").css("left",0):0<s-(o+q)&&q>s&&r>t&&$("#PhotoSlider_NameSpace_MainImg_Node").css("left",s-q),0<t-(p+r)&&r>t&&q>s?$("#PhotoSlider_NameSpace_MainImg_Node").css("top",t-r):0<p&&r>t&&q>s&&$("#PhotoSlider_NameSpace_MainImg_Node").css("top",0)):q>s&&r<=t?(0<o?$("#PhotoSlider_NameSpace_MainImg_Node").css("left",0):0<s-(o+q)&&$("#PhotoSlider_NameSpace_MainImg_Node").css("left",s-q),$("#PhotoSlider_NameSpace_MainImg_Node").css("top",t/2-r/2)):q<=s&&r>t?(0<t-(p+r)?$("#PhotoSlider_NameSpace_MainImg_Node").css("top",t-r):0<p&&$("#PhotoSlider_NameSpace_MainImg_Node").css("top",0),$("#PhotoSlider_NameSpace_MainImg_Node").css("left",s/2-q/2)):q<=s&&r<=t&&($("#PhotoSlider_NameSpace_MainImg_Node").css("left",s/2-q/2),$("#PhotoSlider_NameSpace_MainImg_Node").css("top",t/2-r/2));else if(1==c.testRotateifHorizontal()){var z=(q-r)/2;q>s&&r>t?(0<o&&q>s&&r>t?$("#PhotoSlider_NameSpace_MainImg_Node").css("left",0+z):0<s-(o+q)&&q>s&&r>t&&$("#PhotoSlider_NameSpace_MainImg_Node").css("left",s-q+z),0<t-(p+r)&&r>t&&q>s?$("#PhotoSlider_NameSpace_MainImg_Node").css("top",t-r-z):0<p&&r>t&&q>s&&$("#PhotoSlider_NameSpace_MainImg_Node").css("top",0-z)):q>s&&r<=t?(0<o?$("#PhotoSlider_NameSpace_MainImg_Node").css("left",0+z):0<s-(o+q)&&$("#PhotoSlider_NameSpace_MainImg_Node").css("left",s-q+z),$("#PhotoSlider_NameSpace_MainImg_Node").css("top",t/2-r/2-z)):q<=s&&r>t?(0<t-(p+r)?$("#PhotoSlider_NameSpace_MainImg_Node").css("top",t-r-z):0<p&&$("#PhotoSlider_NameSpace_MainImg_Node").css("top",0-z),$("#PhotoSlider_NameSpace_MainImg_Node").css("left",s/2-q/2+z)):q<=s&&r<=t&&($("#PhotoSlider_NameSpace_MainImg_Node").css("left",s/2-q/2+z),$("#PhotoSlider_NameSpace_MainImg_Node").css("top",t/2-r/2-z))}c.ifmove=0}}}),c.initModal=function(){$(window).scrollLeft(0),$(window).scrollTop(0),$("body").attr("style","overflow:hidden")},c.open=function(o,p){$("#photosliderfixer").height($(window).height()),c.Index=p,c.IndexPre=0,c.IndexNext=0,c.PhotoArray=o,c.PhotoArrayL=o.length,c.MainImgReady=0,c.prenextPool=[],imgSrcPool=Array(c.PhotoArrayL),img=Array(c.PhotoArrayL),c.scrollcache=$("html").scrollTop(),c.initModal();for(var q=0;q<c.PhotoArrayL;q++)imgSrcPool[q]={},imgSrcPool[q].timer=1,imgSrcPool[q].sizeFlag=!1,imgSrcPool[q].src=c.PhotoArray[q].file,imgSrcPool[q].index=q,imgSrcPool[q].instance=new n(imgSrcPool[q].src,q);c.alLocation()},c.alLocation=function(){var o=[];//先读指定的
!1==imgSrcPool[c.Index].sizeFlag&&o.push(c.Index);for(var p=0;p<imgSrcPool.length;p++)p!=c.Index&&!1==imgSrcPool[p].sizeFlag&&o.push(p);if(!(0!=o.length))0==c.MainImgReady&&c.LoadMImgCache();else if(3<=o.length){for(var q=[o[0],o[1],o[2]],r=0;r<q.length;r++)imgSrcPool[q[r]].instance.createImg();c.checkSizeReady(q)}else{for(var q=o,r=0;r<o.length;r++)imgSrcPool[o[r]].instance.createImg();c.checkSizeReady(q)}},c.LoadMImgCache=function(){c.checkMainAlready()},c.LoadSImgCache=function(){c.checkSideImg()},c.checkMainAlready=function(){c.openMain(),c.LoadSImgCache()},c.checkSideImg=function(o){c.refreshSideImg()},c.openMain=function(){c.ifPhotosliderWork=1;var o=document.createElement("div");o.setAttribute("id","PhotoSlider_NameSpace_BackGroundNode"),o.style.backgroundColor="#000b15",o.style.left="0px",o.style.top="0px",o.style.width="100%",o.style.height="100%",o.style.position="absolute",o.style.zIndex="99",o.style.display="none",o.style.transition="all 0.4s",o.style.opacity="0",o.style.overflow="hidden";var p=document.createElement("div");p.setAttribute("id","PhotoSlider_NameSpace_Img_Mask_Node"),p.style.backgroundColor="red",p.style.left="0px",p.style.top="0px",p.style.width="100%",p.style.height="100%",p.style.position="absolute",p.style.zIndex="101",p.style.display="block",p.style.opacity="0",p.style.overflow="hidden",p.color="red",p.setAttribute("onselectstart","return false"),p.style.MozUserSelect="none";var q=document.createElement("div");q.setAttribute("id","PhotoSlider_NameSpace_ToolBar_Node"),q.style.position="absolute",q.style.zIndex="102",q.style.width="240px",q.style.height="30px",q.style.right="0px",q.style.backgroundColor="#000b15",q.style.opacity="0.7",q.style.display="block";var r=document.createElement("span");r.setAttribute("id","PhotoSlider_NameSpace_ToolBarContent_exit_Node"),r.setAttribute("class","ion-close"),r.style.zIndex="102",r.style.cursor="pointer",r.style.position="absolute",r.style.width="50px",r.style.height="30px",r.style.top="0px",r.style.lineHeight="30px",r.style.right="10px",r.style.color="white",r.style.textAlign="center";var s=document.createElement("span");s.setAttribute("id","PhotoSlider_NameSpace_ToolBarContent_rotateLeft_Node"),s.setAttribute("class","ion-reply"),s.style.fontSize="20px",s.style.zIndex="102",s.style.cursor="pointer",s.style.position="absolute",s.style.width="50px",s.style.height="30px",s.style.top="0px",s.style.lineHeight="30px",s.style.right="110px",s.style.color="white",s.style.textAlign="center";var t=document.createElement("span");t.setAttribute("id","PhotoSlider_NameSpace_ToolBarContent_rotateRight_Node"),t.setAttribute("class","ion-forward"),t.style.fontSize="20px",t.style.zIndex="102",t.style.cursor="pointer",t.style.position="absolute",t.style.width="50px",t.style.height="30px",t.style.top="0px",t.style.lineHeight="30px",t.style.right="60px",t.style.color="white",t.style.textAlign="center";var u=document.createElement("span");u.setAttribute("id","PhotoSlider_NameSpace_ToolBarContent_ZoomOut_Node"),u.setAttribute("class","ion-arrow-shrink"),u.style.fontSize="20px",u.style.zIndex="102",u.style.cursor="pointer",u.style.position="absolute",u.style.width="50px",u.style.height="30px",u.style.top="0px",u.style.lineHeight="30px",u.style.right="160px",u.style.color="white",u.style.textAlign="center";var v=document.createElement("span");v.setAttribute("id","PhotoSlider_NameSpace_ToolBarContent_ZoomIn_Node"),v.setAttribute("class","ion-arrow-expand"),v.style.fontSize="20px",v.style.zIndex="102",v.style.cursor="pointer",v.style.position="absolute",v.style.width="50px",v.style.height="30px",v.style.top="0px",v.style.lineHeight="30px",v.style.right="210px",v.style.color="white",v.style.textAlign="center";var w=document.createElement("span");w.setAttribute("id","PhotoSlider_NameSpace_ToolBarContent_Recover_Node"),w.setAttribute("class","ion-loop"),w.style.fontSize="20px",w.style.zIndex="102",w.style.cursor="pointer",w.style.position="absolute",w.style.width="50px",w.style.height="30px",w.style.top="0px",w.style.lineHeight="30px",w.style.right="260px",w.style.color="white",w.style.textAlign="center";var z=document.createElement("span");z.setAttribute("id","PhotoSlider_NameSpace_ToolBarContent_index_Node"),z.style.zIndex="102",z.innerHTML="",z.style.position="absolute",z.style.width="60px",z.style.height="30px",z.style.top="0px",z.style.lineHeight="30px",z.style.left="10px",z.style.textAlign="center",z.style.margin="0px",z.style.color="white";var A=document.createElement("div");A.setAttribute("id","PhotoSlider_NameSpace_nextImg_Node"),A.style.zIndex="100",A.innerHTML="",A.style.backgroundImage="",A.style.backgroundSize="cover",A.style.position="absolute";var B=document.createElement("div");B.setAttribute("id","PhotoSlider_NameSpace_preImg_Node"),B.style.zIndex="100",B.innerHTML="",B.style.backgroundImage="",B.style.backgroundSize="cover",B.style.position="absolute";var C=document.createElement("span");C.setAttribute("id","PhotoSlider_NameSpace_ToolBarContent_OpenCloseSlider_Node"),C.style.zIndex="102",C.innerHTML="开关缩略图",C.style.cursor="pointer",C.style.position="absolute",C.style.width="100px",C.style.height="30px",C.style.top="0px",C.style.lineHeight="30px",C.style.left="230px",C.style.backgroundColor="yellow",C.style.textAlign="center";var D=document.createElement("span");D.setAttribute("id","PhotoSlider_NameSpace_Swipe_toLeft_Node"),D.setAttribute("class","ion-arrow-left-b"),D.style.zIndex="110",D.style.fontSize="40px",D.style.cursor="pointer",D.style.position="absolute",D.style.width="40px",D.style.height="40px",D.style.top="0px",D.style.lineHeight="40px",D.style.left="0px",D.style.color="white",D.style.textAlign="center";var E=document.createElement("span");E.setAttribute("id","PhotoSlider_NameSpace_Swipe_toRight_Node"),E.setAttribute("class","ion-arrow-right-b"),E.style.zIndex="110",E.style.fontSize="40px",E.style.cursor="pointer",E.style.position="absolute",E.style.width="40px",E.style.height="40px",E.style.top="0px",E.style.lineHeight="40px",E.style.right="0px",E.style.color="white",E.style.textAlign="center";var F=document.createElement("div");F.setAttribute("id","PhotoSlider_NameSpace_MainImg_Node"),F.style.zIndex="100",F.style.backgroundColor="#041326",F.style.backgroundImage="",F.style.backgroundSize="cover",F.style.position="absolute",F.style.width="0px",F.style.height="0px",F.style.top="0px",F.style.left="0px",F.style.transition="all 0.2s",document.body.appendChild(o),o.appendChild(F),o.appendChild(D),o.appendChild(E),o.appendChild(p),o.appendChild(q),q.appendChild(s),q.appendChild(t),q.appendChild(u),q.appendChild(v),q.appendChild(w),q.appendChild(r),o.appendChild(A),o.appendChild(B),q.appendChild(z),c.bindButton(),c.LoadImg(),c.initTheLocation(),c.checksideIndex(),c.initRotatePool()},$(window).resize(function(){1==c.ifPhotosliderWork&&c.initTheLocation()}),c.mousedown_Lock=0,c.mouseX=0,c.mouseY=0,c.mouseX_c=0,c.mouseY_c=0,c.RelativeX=0,c.RelativeY=0,c.initTheLocation=function(o){1!=o&&($("#PhotoSlider_NameSpace_BackGroundNode").css("transition","all 0s"),$("#PhotoSlider_NameSpace_MainImg_Node").css("transition","all 0s"));var p=$(window).height(),q=$(window).width(),r=imgSrcPool[c.Index].width,s=imgSrcPool[c.Index].height,t=$("#PhotoSlider_NameSpace_ToolBarContent_category_Select_Node").width(),u=imgSrcPool[c.Index].width/imgSrcPool[c.Index].height;//   if(photoslider.testRotateifHorizontal()==0){
//重设背景大小
$("#PhotoSlider_NameSpace_BackGroundNode").height(p),$("#PhotoSlider_NameSpace_BackGroundNode").width(q),$("#PhotoSlider_NameSpace_Img_Mask_Node").height(p),$("#PhotoSlider_NameSpace_Img_Mask_Node").width(q),$("#PhotoSlider_NameSpace_Swipe_toLeft_Node").css("top",p/2-20),$("#PhotoSlider_NameSpace_Swipe_toRight_Node").css("top",p/2-20),$("#PhotoSlider_NameSpace_ToolBar_Node").width(q),$("#PhotoSlider_NameSpace_ToolBarContent_category_Select_Node").css("left",q/2-t/2),$("#PhotoSlider_NameSpace_BackGroundNode").css("transition","all 0.4s"),$("#PhotoSlider_NameSpace_MainImg_Node").css("transition","all 0.2s"),r&&s?r>=q||s>=p?r>=q&&s<p?($("#PhotoSlider_NameSpace_MainImg_Node").css("width",q),$("#PhotoSlider_NameSpace_MainImg_Node").css("height",q/u),$("#PhotoSlider_NameSpace_MainImg_Node").css("left",0),$("#PhotoSlider_NameSpace_MainImg_Node").css("top",p/2-q/u/2)):r<q&&s>=p?($("#PhotoSlider_NameSpace_MainImg_Node").css("height",p),$("#PhotoSlider_NameSpace_MainImg_Node").css("width",p*u),$("#PhotoSlider_NameSpace_MainImg_Node").css("top",0),$("#PhotoSlider_NameSpace_MainImg_Node").css("left",q/2-p*u/2)):q/u>=p?($("#PhotoSlider_NameSpace_MainImg_Node").css("height",p),$("#PhotoSlider_NameSpace_MainImg_Node").css("width",p*u),$("#PhotoSlider_NameSpace_MainImg_Node").css("top",0),$("#PhotoSlider_NameSpace_MainImg_Node").css("left",q/2-p*u/2)):($("#PhotoSlider_NameSpace_MainImg_Node").css("width",q),$("#PhotoSlider_NameSpace_MainImg_Node").css("height",q/u),$("#PhotoSlider_NameSpace_MainImg_Node").css("left",0),$("#PhotoSlider_NameSpace_MainImg_Node").css("top",p/2-q/u/2)):($("#PhotoSlider_NameSpace_MainImg_Node").css("width",r),$("#PhotoSlider_NameSpace_MainImg_Node").css("height",s),$("#PhotoSlider_NameSpace_MainImg_Node").css("left",q/2-r/2),$("#PhotoSlider_NameSpace_MainImg_Node").css("top",p/2-s/2)):($("#PhotoSlider_NameSpace_MainImg_Node").css("width",0.7*q),$("#PhotoSlider_NameSpace_MainImg_Node").css("height",0.7*p),$("#PhotoSlider_NameSpace_MainImg_Node").css("left",q/2-0.7*q/2),$("#PhotoSlider_NameSpace_MainImg_Node").css("top",p/2-0.7*p/2)),$("#PhotoSlider_NameSpace_nextImg_Node").css("transition","0s"),$("#PhotoSlider_NameSpace_preImg_Node").css("transition","0s")},c.predoswipe=function(o){c.checksideIndex();var p=o,q=imgSrcPool[c.Index].width,r=imgSrcPool[c.Index].height;0==p?c.phototoLeft(c.Index):1==p&&c.phototoRight(c.Index),c.LoadSImgCache(),c.PhotoSizeRecover(q,r,1)},c.bindButton=function(){$("#PhotoSlider_NameSpace_ToolBarContent_exit_Node").click(function(){$("#PhotoSlider_NameSpace_BackGroundNode").remove(),c.ifPhotosliderWork=0,$("body").attr("style",""),$("#photosliderfixer").height("100%"),$("html").scrollTop(c.scrollcache)}),$("#PhotoSlider_NameSpace_ToolBarContent_ZoomIn_Node").click(function(){f(0)}),$("#PhotoSlider_NameSpace_ToolBarContent_ZoomOut_Node").click(function(){g(0)}),$("#PhotoSlider_NameSpace_ToolBarContent_rotateLeft_Node").click(function(){h()}),$("#PhotoSlider_NameSpace_ToolBarContent_rotateRight_Node").click(function(){j()}),$("#PhotoSlider_NameSpace_ToolBarContent_Recover_Node").click(function(){var o=imgSrcPool[c.Index].width,p=imgSrcPool[c.Index].height;c.PhotoSizeRecover(o,p,1)}),$("#PhotoSlider_NameSpace_ToolBarContent_OpenCloseSlider_Node").click(function(){OpenClosePhotoSlider()}),$("#PhotoSlider_NameSpace_Swipe_toLeft_Node").click(function(){var o=imgSrcPool.length;0==c.Index?c.Index=o-1:c.Index--,c.predoswipe(0)}),$("#PhotoSlider_NameSpace_Swipe_toRight_Node").click(function(){var o=imgSrcPool.length;c.Index==o-1?c.Index=0:c.Index++,c.predoswipe(1)})},c.checksideIndex=function(){var o=c.Index,p=c.PhotoArrayL;o==p-1?(c.IndexNext=0,c.IndexPre=c.Index-1):0==o&&(c.IndexPre=p-1,c.IndexNext=c.Index+1)},c.testRotateifHorizontal=function(){var o=c.rotatePool[c.Index].rotate;if(0==o/90%2)return 0;return 0==o/90%2?void 0:1},c.initRotatePool=function(){c.rotatePool=[];for(var o=c.PhotoArray.length,p=0;p<o;p++)c.rotatePool[p]={},c.rotatePool[p].rotate=0},c.grabImg=function(){if(1==c.mousedown_Lock){var o=$(window).width();$(window).height();//  if(ImgWidth > WinWidth || ImgHeight > WinHeight){
var p=c.mouseX_c,q=c.mouseY_c;c.mouseX-p,c.mouseY-q;var r=$("#PhotoSlider_NameSpace_MainImg_Node").offset().left;if($("#PhotoSlider_NameSpace_MainImg_Node").offset().top,0==c.testRotateifHorizontal())var s=$("#PhotoSlider_NameSpace_MainImg_Node").height(),t=$("#PhotoSlider_NameSpace_MainImg_Node").width();else if(1==c.testRotateifHorizontal())var s=$("#PhotoSlider_NameSpace_MainImg_Node").width(),t=$("#PhotoSlider_NameSpace_MainImg_Node").height(),u=(s-t)/2;0==c.testRotateifHorizontal()?($("#PhotoSlider_NameSpace_MainImg_Node").css("left",p-c.RelativeX),$("#PhotoSlider_NameSpace_MainImg_Node").css("top",q-c.RelativeY)):1==c.testRotateifHorizontal()&&($("#PhotoSlider_NameSpace_MainImg_Node").css("left",p-c.RelativeX-u),$("#PhotoSlider_NameSpace_MainImg_Node").css("top",q-c.RelativeY+u));// 图片拖动切换功能区
var v=0.33*o,w=0.66*o;r>w?($("#PhotoSlider_NameSpace_preImg_Node").css("transition","0s"),$("#PhotoSlider_NameSpace_preImg_Node").css("left",-$("#PhotoSlider_NameSpace_preImg_Node").width()+(r-w)),c.prenextPool[0]=1):r+t<v?($("#PhotoSlider_NameSpace_nextImg_Node").css("transition","0s"),$("#PhotoSlider_NameSpace_nextImg_Node").css("left",$(window).width()-(v-(r+t))),c.prenextPool[1]=1):(c.prenextPool[0]=0,c.prenextPool[1]=0,$("#PhotoSlider_NameSpace_preImg_Node").css("left",-$("#PhotoSlider_NameSpace_preImg_Node").width()),$("#PhotoSlider_NameSpace_nextImg_Node").css("left",$(window).width()))}};var f=function f(p){var q=$(window).height(),r=$(window).width(),s=$("#PhotoSlider_NameSpace_MainImg_Node").width(),t=$("#PhotoSlider_NameSpace_MainImg_Node").height(),u=0;u=0==p?1.3:1.4,$("#PhotoSlider_NameSpace_MainImg_Node").offset().top,$("#PhotoSlider_NameSpace_MainImg_Node").offset().left;var v=s*u,w=t*u;v<2.4*r&&($("#PhotoSlider_NameSpace_MainImg_Node").css("width",v),$("#PhotoSlider_NameSpace_MainImg_Node").css("height",w),$("#PhotoSlider_NameSpace_MainImg_Node").css("left",r/2-v/2),$("#PhotoSlider_NameSpace_MainImg_Node").css("top",q/2-w/2))},g=function g(p){var q=$(window).height(),r=$(window).width(),s=$("#PhotoSlider_NameSpace_MainImg_Node").width(),t=$("#PhotoSlider_NameSpace_MainImg_Node").height(),u=0,v=imgSrcPool[c.Index].width/imgSrcPool[c.Index].height;u=0==p?0.7:0.6,$("#PhotoSlider_NameSpace_MainImg_Node").offset().top,$("#PhotoSlider_NameSpace_MainImg_Node").offset().left;var w=s*u,z=t*u;50<w?($("#PhotoSlider_NameSpace_MainImg_Node").css("width",w),$("#PhotoSlider_NameSpace_MainImg_Node").css("height",z),$("#PhotoSlider_NameSpace_MainImg_Node").css("left",r/2-w/2),$("#PhotoSlider_NameSpace_MainImg_Node").css("top",q/2-z/2)):($("#PhotoSlider_NameSpace_MainImg_Node").css("width",50),$("#PhotoSlider_NameSpace_MainImg_Node").css("height",50/v),$("#PhotoSlider_NameSpace_MainImg_Node").css("left",r/2-25),$("#PhotoSlider_NameSpace_MainImg_Node").css("top",q/2-50/v/2));;},h=function h(){var p=c.rotatePool[c.Index].rotate-90;$("#PhotoSlider_NameSpace_MainImg_Node").css("transform","rotate("+p+"deg)"),c.rotatePool[c.Index].rotate=p,c.initTheLocation(1)},j=function j(){var p=c.rotatePool[c.Index].rotate+90;$("#PhotoSlider_NameSpace_MainImg_Node").css("transform","rotate("+p+"deg)"),c.rotatePool[c.Index].rotate=p,c.initTheLocation(1)};c.PhotoSizeRecover=function(){c.initTheLocation(1)},c.phototoLeft=function(){c.LoadImg(),c.loadtheRotate(0)},c.phototoRight=function(){c.LoadImg(),c.loadtheRotate(0)},c.loadtheRotate=function(o){0==o&&$("#PhotoSlider_NameSpace_MainImg_Node").css("transition","all 0s");var p=c.rotatePool[c.Index].rotate;null!=p&&""!=p?$("#PhotoSlider_NameSpace_MainImg_Node").css("transform","rotate("+p+"deg)"):$("#PhotoSlider_NameSpace_MainImg_Node").css("transform","rotate(0deg)")},c.LoadImg=function(){var o=$(window).height(),p=$(window).width();$("#PhotoSlider_NameSpace_BackGroundNode").height();var q=$("#PhotoSlider_NameSpace_ToolBarContent_category_Node").width();imgSrcPool[c.Index].width,imgSrcPool[c.Index].height,$("#PhotoSlider_NameSpace_BackGroundNode").height(o),$("#PhotoSlider_NameSpace_BackGroundNode").width(p),$("#PhotoSlider_NameSpace_ToolBar_Node").width(p),$("#PhotoSlider_NameSpace_ToolBarContent_category_Node").css("right",p/2-q/2),$("#PhotoSlider_NameSpace_ToolBarContent_index_Node").html(c.Index+1+"/"+imgSrcPool.length),$("#PhotoSlider_NameSpace_Swipe_toLeft_Node").css("top",o/2-20),$("#PhotoSlider_NameSpace_Swipe_toRight_Node").css("top",o/2-20),$("#PhotoSlider_NameSpace_BackGroundNode").show(),$("#PhotoSlider_NameSpace_BackGroundNode").css("opacity","1"),$("#PhotoSlider_NameSpace_ToolBar_Node").show(),$("#PhotoSlider_NameSpace_MainImg_Node").css("backgroundImage","url("+imgSrcPool[c.Index].src+")")},c.scrollFunc_Lock=0,c.ifPhotosliderWork=0;var l=function l(p){if(0==c.scrollFunc_Lock&&1==c.ifPhotosliderWork){p=p||window.event;var q=0;q=p.wheelDelta?p.wheelDelta/120:p.detail/-3;;$("#PhotoSlider_NameSpace_MainImg_Node").css("transition","all 0.1s"),c.scrollFunc_Lock=1,setTimeout("photoslider.scrollFunc_Lock = 0",130),0<q?f(1):0>q&&g(1);;}};document.addEventListener&&document.addEventListener("DOMMouseScroll",l,!1),window.onmousewheel=document.onmousewheel=l,c.refreshSideImg=function(){if(1==c.PhotoArrayL)var o=0,p=0;else if(0==c.Index)var o=c.PhotoArrayL-1,p=1;else if(c.Index==c.PhotoArrayL-1)var p=0,o=c.Index-1;else var o=c.Index-1,p=c.Index+1;$("#PhotoSlider_NameSpace_preImg_Node").width(imgSrcPool[o].width),$("#PhotoSlider_NameSpace_nextImg_Node").width(imgSrcPool[p].width),$("#PhotoSlider_NameSpace_preImg_Node").height(imgSrcPool[o].height),$("#PhotoSlider_NameSpace_nextImg_Node").height(imgSrcPool[p].height),$("#PhotoSlider_NameSpace_preImg_Node").css("top",$(window).height()/2-$("#PhotoSlider_NameSpace_preImg_Node").height()/2),$("#PhotoSlider_NameSpace_nextImg_Node").css("top",$(window).height()/2-$("#PhotoSlider_NameSpace_nextImg_Node").height()/2),$("#PhotoSlider_NameSpace_nextImg_Node").css("left",$(window).width()),$("#PhotoSlider_NameSpace_preImg_Node").css("left",-$("#PhotoSlider_NameSpace_preImg_Node").width()),$("#PhotoSlider_NameSpace_preImg_Node").css("backgroundImage","url("+imgSrcPool[o].src+")"),$("#PhotoSlider_NameSpace_nextImg_Node").css("backgroundImage","url("+imgSrcPool[p].src+")")};var m=[],n=function(){function o(p,q){_classCallCheck(this,o),this.filename=p,this.testTimer=null,this.index=q,this.init=null,m[q]=this}return o.prototype.createImg=function(){this.init=1;var q=new Image;if(q.src=this.filename,this.img=q,q.onload=function(){this.index==c.Index&&c.initTheLocation(1)},q.complete){var r=[this.img.width,this.img.height];imgSrcPool[this.index].width=r[0],imgSrcPool[this.index].height=r[1],imgSrcPool[this.index].sizeFlag=!0}var s=this.index;this.testTimer=setInterval(function(){m[s].getImgSize()},20)},o.prototype.getImgSize=function(){if(0!=this.img.width*this.img.height){clearInterval(m[this.index].testTimer),this.testTimer=null;var q=[this.img.width,this.img.height];imgSrcPool[this.index].width=q[0],imgSrcPool[this.index].height=q[1],imgSrcPool[this.index].sizeFlag=!0,this.index==c.Index&&(c.MainImgReady=1,c.LoadMImgCache())}},o}();c.checkSizeReady=function(o){var p=o,q=setInterval(function(){for(var r=0,s=0;s<p.length;s++)!1==imgSrcPool[p[s]].sizeFlag&&(r=1);0==r&&(clearInterval(q),c.alLocation())},30)}})();
